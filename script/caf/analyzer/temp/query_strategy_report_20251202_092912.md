# 查询策略评估报告

## 卡牌表(cards) vs 系列翻译表(set_translations)

### 1. 核心差异诊断

**最终结论**: 存在重大区别

**快速总结**: 预计JOIN查询结果行数: 246330，存在数据膨胀风险

#### 风险矩阵

| 风险维度 | 检测结果 | 影响解释 |
|:---------|:---------|:---------|
| 数据膨胀 (Fan-out) | 🚨 高风险 (最大扇出: 5080) | 系列翻译表(set_translations)中每个值最多对应5080条记录，JOIN会导致严重的数据膨胀 |
| 数据丢失 (Filtering) | 🚨 高风险 (匹配率: 22.6%) | 卡牌表(cards)中有77.4%的值在系列翻译表(set_translations)中找不到，INNER JOIN会丢失大量数据 |
| 字段唯一性检查 | 卡牌表(cards): 非唯一, 系列翻译表(set_translations): 非唯一 | 两个字段都非唯一，可能形成复杂的N:N关系 |

### 2. 场景化模拟

针对具体值 'OGW' 的查询：

#### Query 1 (单表查询)
- **行为**: 仅查询卡牌表(cards)表
- **结果**: 返回卡牌表(cards)表中所有'OGW'相关的记录

#### Query 2 (JOIN查询)
- **行为**: 先将卡牌表(cards)与系列翻译表(set_translations)连接，再过滤  
- **结果**: 可能返回246330行（每条主表记录重复5080次）
- **问题**: 每一条卡牌表(cards)的记录都重复出现了5080次

### 3. 字段关系图谱

- **关系类型**: 一对多关系（1:5080）
- **连接安全性**: 不安全，会产生5080倍数据重复
- **建议**: ❌ 不建议直接JOIN，两个字段都不适合作为连接键

### 4. 开发指导

#### 优先建议
- **高优先级**: 建议使用单表查询（Query 1） - JOIN查询会导致数据重复5080倍

#### SQL示例
```sql
-- 推荐的单表查询
SELECT columns FROM 卡牌表(cards) WHERE field = 'value'

-- 谨慎的JOIN查询
SELECT columns FROM 卡牌表(cards) a LEFT JOIN 系列翻译表(set_translations) b ON a.field = b.field WHERE ...
```

#### 性能考虑
- 单表查询性能更好
- 预计JOIN结果行数: 246330
